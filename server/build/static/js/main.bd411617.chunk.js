(window.webpackJsonpclient=window.webpackJsonpclient||[]).push([[0],{249:function(e,t,a){e.exports=a(416)},254:function(e,t,a){},255:function(e,t,a){},416:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(60),s=a.n(i),l=(a(254),a(8)),o=a(15),c=a(17),d=a(16),u=a(18),h=(a(255),a(434)),m=a(152),p=a(237),f=a(29),g=a(54),v=a(239),E=a(417),b=a(433),y=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={isLoggedIn:!1},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"handleLoginClick",value:function(e){e?this.setState({isLoggedIn:!1}):this.props.history.push("/login-form")}},{key:"render",value:function(){var e=this,t=void 0===this.props.isbackable?new URLSearchParams(this.props.location.search).get("isbackable"):this.props.isbackable;return void 0!==this.props.isbackable&&this.setState({isLoggedIn:this.props.isloggedin}),r.a.createElement(v.a,{style:{padding:"15px 15px 15px 15px"},container:!0,columns:3},r.a.createElement(v.a.Row,null,r.a.createElement(v.a.Column,null,r.a.createElement(E.a,{onClick:this.props.handleSidebarClick},(this.props.sidebarVisible?"Hide":"Show")+" sidebar")),r.a.createElement(v.a.Column,null,r.a.createElement(b.a,null,this.props.header)),r.a.createElement(v.a.Column,null,t?r.a.createElement(E.a,{onClick:function(){e.props.history.goBack()},disabled:!t},"Back"):void 0,r.a.createElement(E.a,{onClick:function(){return e.handleLoginClick(e.state.isLoggedIn)}},this.state.isLoggedIn?"Logout":"Login"))))}}]),t}(n.Component),C=Object(g.e)(y),S=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"page"},r.a.createElement(C,{header:"Home",sidebarVisible:this.props.sidebarVisible,handleSidebarClick:this.props.handleSidebarClick}),r.a.createElement("div",{id:"container",style:{height:"100vh"}},"Content goes here"))}}]),t}(n.Component),k=a(51),D=a(430),w=function e(t,a,n,r,i,s,o,c){Object(l.a)(this,e),this.id=t,this.matchid=a,this.title=n,this.author=r,this.url=i,this.published=s,this.extracted=o,this.data=c},O=function e(t,a,n,r,i,s,o){Object(l.a)(this,e),this.id=t,this.date=a,this.home=n,this.away=r,this.competitionID=i,this.competitionName=s,this.data=o},I=function e(t,a,n,r,i,s){Object(l.a)(this,e),this.id=t,this.date=a,this.home=n,this.away=r,this.competitionID=i,this.competitionName=s},j=function e(t,a,n,r,i,s,o,c,d){Object(l.a)(this,e),this.editID=t,this.structuredDataID=a,this.unstructuredDataID=n,this.isCorpus=r,this.settings=i,this.replace=s,this.replaceWith=o,this.type=c,this.order=d},x=function e(t,a,n,r){Object(l.a)(this,e),this.id=t,this.name=a,this.countryName=n,this.countryId=r},N=function e(t,a,n){Object(l.a)(this,e),this.begin=t,this.end=a,this.compId=n},L=function e(t,a,n){Object(l.a)(this,e),this.type=t,this.value=a,this.field=n},A=45,T=["cards","lineup","goalscorer","league_name","country_name","match_status","substitutions","match_hometeam_name","match_awayteam_name"],V=["replace","replacewithfield","sequentialreplace"],R=["Replace","Replace Field","Sequential Replace"],P=a(425),H=function(e){function t(e){var a,n;return Object(l.a)(this,t),n=void 0!=(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).props.onSelect?function(e){a.setState({activeRow:e.id}),a.props.onSelect(e)}:function(){},a.state={activeRow:-1,selectFunc:n,page:a.props.page,totalPages:a.props.totalPages},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"renderPageButtons",value:function(){var e=this;if(Number.isInteger(this.props.totalPages)&&Number.isInteger(this.state.page)&&this.state.totalPages>1)return r.a.createElement(P.a,{textAlign:"right"},r.a.createElement(E.a,{onClick:function(){return e.props.onPageChange(--e.state.page)},disabled:this.state.page<2||this.props.paging},"Prev"),r.a.createElement(E.a,{onClick:function(){return e.props.onPageChange(++e.state.page)},disabled:this.state.page===this.state.totalPages||this.props.paging},"Next"))}},{key:"render",value:function(){var e=this;if(!Array.isArray(this.props.items)&&Object.keys(this.props.items).every((function(t){return 0==Array.isArray(e.props.items[t])})))throw Error("Props.items should contain a list of data or an object containing only lists of data");if(Array.isArray(this.props.items)&&0==this.props.items.every((function(e){return void 0!=e&&null!=e})))throw new Error("props.data must be an instance of data");if(void 0==this.genRows||void 0==this.genHeader)throw new Error("genRows and genHeader must be defined by child component");void 0!==this.isValidData&&this.isValidData();var t=void 0!==this.props.onSelect;return r.a.createElement("div",null,this.renderPageButtons(),r.a.createElement(D.a,{striped:!0,selectable:t},r.a.createElement(D.a.Header,null,this.genHeader()),r.a.createElement(D.a.Body,null,this.genRows())))}}]),t}(n.Component);function M(e){if(e.data instanceof w==0)throw Error("props.data must be an instance of unstructured data");var t=e.data.published,a=t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear(),n=e.data.title;n.length>A&&(n=n.substring(0,A-3)+"...");var i=void 0!=e.onSelect?e.onSelect:function(){};return r.a.createElement(D.a.Row,{onClick:function(){return i(e.data)},active:e.isActive},r.a.createElement(D.a.Cell,null,a),r.a.createElement(D.a.Cell,null,e.data.author),r.a.createElement(D.a.Cell,null,n))}var _=function(e){function t(e){return Object(l.a)(this,t),Object(c.a)(this,Object(d.a)(t).call(this,e))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"genRows",value:function(){var e=this;return this.props.items.map((function(t,a){return r.a.createElement(M,{key:t.id,data:t,onSelect:e.state.selectFunc,isActive:t.id==e.state.activeRow})}))}},{key:"genHeader",value:function(){return this.state.header=r.a.createElement(D.a.Row,null,r.a.createElement(D.a.HeaderCell,null,"Published"),r.a.createElement(D.a.HeaderCell,null,"Author"),r.a.createElement(D.a.HeaderCell,null,"Title"))}},{key:"isValidData",value:function(){if(0==this.props.items.every((function(e){var t="number"===typeof e.id,a=e.published instanceof Date,n="string"===typeof e.author,r="string"===typeof e.title;return t&&a&&n&&r})))throw new Error("every piece of data should have valid id, published, title and author")}}]),t}(H);function F(e){return new O(Number.parseInt(e.id),new Date(e.date),e.home,e.away,Number.parseInt(e.competitionID),e.competitionName,e.data)}function U(e){return new w(Number.parseInt(e.id),Number.parseInt(e.matchid),e.title,e.author,e.url,new Date(e.published),new Date(e.extracted),e.data)}function q(e){return new j(Number.parseInt(e.editID),Number.isInteger(e.structuredDataID)?Number.parseInt(e.structuredDataID):null,Number.isInteger(e.unstructuredDataID)?Number.parseInt(e.unstructuredDataID):null,e.isCorpus,e.settings,e.replace,e.replaceWith,e.type,e.order)}function B(e){return new I(Number.parseInt(e.id),new Date(e.date),e.home,e.away,Number.parseInt(e.competitionID),e.competitionName)}function z(e){return new x(Number.parseInt(e.id),e.name,e.countryName,Number.parseInt(e.countryId))}var W=a(431),$=a(426),J=a(432),Y=a(428),G=function(){function e(t){Object(l.a)(this,e),this.delay=t}return Object(o.a)(e,[{key:"start",value:function(e){var t=this,a=new Date;this.lastInput=a,setTimeout((function(){t.lastInput===a&&e()}),this.delay)}},{key:"stop",value:function(){this.lastInput=void 0}}]),e}(),Z=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={data:[],target:[],isLoaded:!1,isError:!1,page:1,totalPages:NaN,paging:!1,searches:{},delayEngine:new G(750)},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({isError:!0})}},{key:"handlePageChange",value:function(e){this.state.page=e,this.setState({paging:!0,page:e})}},{key:"handleSearchChange",value:function(e,t){var a=this;void 0===t&&void 0!==e&&(delete this.state.searches[e],this.setState({searches:this.state.searches},(function(){a.state.delayEngine.start((function(){return a.search()}))}))),void 0!==t&&null!==t&&"object"===typeof t&&t instanceof L&&(this.state.searches[e]=t,this.setState({searches:this.state.searches},(function(){a.state.delayEngine.start((function(){return a.search()}))})))}},{key:"search",value:function(){this.state.delayEngine.stop(),this.sendRequest(Object.values(this.state.searches))}},{key:"sendRequest",value:function(e){var t,a=this;if(void 0===this.state.route)throw new Error("this.state.route should be defined");t=void 0===this.genBody?void 0!==e?JSON.stringify({searches:e}):"":JSON.stringify(this.genBody()),fetch(this.state.route+"?page="+this.state.page,{method:"POST",body:t,headers:{"Content-Type":"application/json"}}).then((function(e){if(e.ok)return e.json();throw 404==e.status?new Error(404):new Error(500)})).then((function(e){a.setState({totalPages:e.pages,isLoaded:!0,paging:!1}),void 0!==e&&a.loadData(e)})).catch((function(e){console.log(e),a.setState({isError:!0})}))}},{key:"loadIfNotAlready",value:function(){if((!1===this.state.isLoaded||!0===this.state.paging)&&!1===this.state.isError){if(void 0===this.loadData)throw new Error("Load data must be defined by child component");this.sendRequest()}}},{key:"renderError",value:function(){var e=this;return r.a.createElement(W.a,{negative:!0},r.a.createElement(W.a.Header,null,"An error has occured"),r.a.createElement("p",null,"Failed to get data from the server."),r.a.createElement(E.a,{color:"red",onClick:function(){return e.sendRequest()}},"Try Again?"))}},{key:"routeToEdit",value:function(e){this.props.history.push("/add_edit?id="+e.editID+"&isbackable=true")}},{key:"renderLoading",value:function(){return r.a.createElement($.a,{active:!0},"Loading your edits")}},{key:"executeRender",value:function(){if(void 0===this.renderLoaded)throw new Error("Renderloaded must be defined in child component");return this.state.isError?this.renderError():this.state.isLoaded?this.renderLoaded():void this.renderLoading()}},{key:"render",value:function(){return this.loadIfNotAlready(),r.a.createElement("div",{className:"page"},r.a.createElement(J.a,{active:!this.state.isLoaded},r.a.createElement($.a,{active:!this.state.isLoaded}," Loading")),r.a.createElement(C,{header:void 0!=this.state.headerText?this.state.headerText:"List Page",sidebarVisible:this.props.sidebarVisible,handleSidebarClick:this.props.handleSidebarClick}),r.a.createElement(P.a,null,r.a.createElement(P.a,{textAlign:"center"},r.a.createElement(Y.a,null,void 0!==this.renderSearch?this.renderSearch():void 0)),r.a.createElement("br",null),r.a.createElement("div",{id:"container",style:{minHeight:"100vh"}},this.executeRender())))}}]),t}(n.Component),X=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).changeHandler=function(e){switch(a.setState(Object(k.a)({},e.target.name,e.target.value)),e.target.name){case"search":a.handleSearchChange(e.target.name,new L("text",e.target.value,["author","title","url","data"]));break;case"start":var t=e.target.value.split("-"),n=new Date(t[0],t[1]-1,t[2],0,0,0);a.handleSearchChange(e.target.name,new L("after",n,"published")),console.log(n);break;case"end":t=e.target.value.split("-");var r=new Date(t[0],t[1]-1,t[2],0,0,0);a.handleSearchChange(e.target.name,new L("before",r,"published")),console.log(r)}},a.state.isLoaded=!1,a.state.search="",a.state.start="",a.state.end="",a.state.match="",a.state.league="",a.state.headerText="Unstructured Data List",a.state.route="/UnstructuredDataList",a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"loadData",value:function(e){console.log(e),e.unstructuredData=e.unstructuredData.map((function(e){return U(e)})),this.setState({data:e.unstructuredData,isLoaded:!0,isError:!1})}},{key:"routeToUnstructuredData",value:function(e){this.props.history.push("/add_unstructured_data?id="+e.id+"&isbackable=true")}},{key:"renderLoaded",value:function(){return r.a.createElement("div",{class:"inline fields"},r.a.createElement("div",{class:"one wide field"}),r.a.createElement("div",{class:"fourteen wide field"},r.a.createElement(_,{totalPages:this.state.totalPages,onPageChange:this.handlePageChange.bind(this),page:this.state.page,paging:this.state.paging,items:this.state.data,onSelect:this.routeToUnstructuredData.bind(this)})))}},{key:"renderSearch",value:function(){var e=this.state,t=e.search,a=e.start,n=e.end,i=e.match,s=e.league;e.data;return r.a.createElement("div",{id:"container"},r.a.createElement("form",{class:"ui form"},r.a.createElement("div",{class:"inline fields"},r.a.createElement("div",{class:"one wide field"}),r.a.createElement("div",{class:"fourteen wide field"},r.a.createElement("label",null,"Search"),r.a.createElement("div",{class:"ui icon input"},r.a.createElement("input",{type:"text",name:"search",value:t,onChange:this.changeHandler.bind(this)}),r.a.createElement("i",{class:"search icon"})))),r.a.createElement("div",{class:"inline fields"},r.a.createElement("div",{class:"one wide field"}),r.a.createElement("div",{class:"eight wide field"},r.a.createElement("label",null,"Between"),r.a.createElement("input",{type:"date",name:"start",value:a,onChange:this.changeHandler.bind(this)}),r.a.createElement("input",{type:"date",name:"end",value:n,onChange:this.changeHandler.bind(this)})),r.a.createElement("div",{class:"six wide field"},r.a.createElement("label",null,"Match"),r.a.createElement("input",{type:"text",name:"match",value:i,onChange:this.changeHandler.bind(this)}))),r.a.createElement("div",{class:"inline fields"},r.a.createElement("div",{class:"nine wide field"}),r.a.createElement("div",{class:"six wide field"},r.a.createElement("label",null,"League"),r.a.createElement("input",{type:"text",name:"league",value:s,onChange:this.changeHandler.bind(this)})))))}}]),t}(Z),K=Object(g.e)(X);function Q(e){if(e.data instanceof O==0)throw Error("props.data must be an instance of structured data");var t=e.data.date,a=t.getDate()+"/"+t.getMonth()+"/"+t.getFullYear(),n=e.data.home+" vs "+e.data.away,i=void 0!=e.onSelect?e.onSelect:function(){};return r.a.createElement(D.a.Row,{onClick:function(){return i(e.data)},active:e.isActive},r.a.createElement(D.a.Cell,null,a),r.a.createElement(D.a.Cell,null,n),r.a.createElement(D.a.Cell,null,e.data.competitionName))}var ee=function(e){function t(e){return Object(l.a)(this,t),Object(c.a)(this,Object(d.a)(t).call(this,e))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"genRows",value:function(){var e=this;return this.props.items.map((function(t,a){return r.a.createElement(Q,{key:t.id,data:t,onSelect:e.state.selectFunc,isActive:t.id==e.state.activeRow})}))}},{key:"genHeader",value:function(){return r.a.createElement(D.a.Row,null,r.a.createElement(D.a.HeaderCell,null,"Date"),r.a.createElement(D.a.HeaderCell,null,"Match"),r.a.createElement(D.a.HeaderCell,null,"Competition"))}},{key:"isValidData",value:function(){if(!1===this.props.items.every((function(e){var t="number"===typeof e.id,a=e.date instanceof Date,n="string"===typeof e.home,r="string"===typeof e.away,i="number"===typeof e.competitionID,s="string"===typeof e.competitionName;return t&&a&&n&&r&&i&&s})))throw new Error("every piece of data should have valid date, home, away, comp name")}}]),t}(H),te=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state.headerText="Structured Data Page",a.state.route="/structuredDataList",a.state.isCompLoaded=!1,a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({isError:!0})}},{key:"loadData",value:function(e){var t=e.structuredData.map((function(e){return F(e)}));this.setState({data:t,isLoaded:!0,isError:!1})}},{key:"genDropDownItems",value:function(e,t){return e.map((function(e,a){var n=void 0!==t?t[a]:e.replace(/([a-z])([A-Z][a-z])/g,"$1 $2").charAt(0).toUpperCase()+e.slice(1).replace(/([a-z])([A-Z][a-z])/g,"$1 $2");return{key:e,text:n,value:e}}))}},{key:"loadComps",value:function(){var e=this;fetch("/competitions").then((function(e){return e.json()})).then((function(t){var a=t.map((function(e){return z(e)})),n=a.map((function(e){return e.id})),r=a.map((function(e){return e.name}));e.setState({items:e.genDropDownItems(n,r),isCompLoaded:!0})}))}},{key:"handleDateSearchChange",value:function(e,t,a){if(""==t)this.handleSearchChange(e,void 0);else{var n=a?"after":"before",r=t.split("-"),i=new Date(r[0],r[1],r[2]);this.handleSearchChange(e,new L(n,i,"date"))}}},{key:"renderSearch",value:function(){var e=this;return!1===this.state.isCompLoaded&&this.loadComps(),r.a.createElement("div",null,r.a.createElement(Y.a.Input,{placeholder:"Search",name:"search",icon:"search",onChange:function(t,a){var n=a.name,r=a.value;return e.handleSearchChange(n,new L("text",r,["home","away","competitionName"]))}}),r.a.createElement(Y.a.Group,{inline:!0},r.a.createElement(Y.a.Input,{placeholder:"before",label:"Between",name:"after",type:"date",onChange:function(t,a){var n=a.name,r=a.value;return e.handleDateSearchChange(n,r,!0)}}),r.a.createElement(Y.a.Input,{placeholder:"after",name:"before",type:"date",onChange:function(t,a){var n=a.name,r=a.value;return e.handleDateSearchChange(n,r,!1)}}),r.a.createElement(Y.a.Select,{label:"Competition",name:"compId",options:this.state.items,onChange:function(t,a){a.name;var n=a.value;return e.handleSearchChange(new L("exact",n,"competitionID"))}})))}},{key:"renderLoaded",value:function(){return r.a.createElement("div",null,r.a.createElement("p",null," A list of all structured data. Click on an item to view it in detail "),r.a.createElement(ee,{totalPages:this.state.totalPages,onPageChange:this.handlePageChange.bind(this),page:this.state.page,paging:this.state.paging,onSelect:this.routeToData.bind(this),items:this.state.data}))}},{key:"routeToData",value:function(e){this.props.history.push("/structured_data_page?id="+e.id+"&isbackable=true")}},{key:"renderLoading",value:function(){return r.a.createElement($.a,null,"Loading Data")}}]),t}(Z),ae=Object(g.e)(te),ne=a(427);function re(e){var t=e.data.date,a=t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear(),n=e.data.home+" vs "+e.data.away,i=void 0!=e.onSelect?e.onSelect:function(){};return r.a.createElement(D.a.Row,{onClick:function(){return i(e.data)},active:e.isActive},r.a.createElement(D.a.Cell,null,a),r.a.createElement(D.a.Cell,null,n),r.a.createElement(D.a.Cell,null,e.data.competitionName))}var ie=function(e){function t(e){return Object(l.a)(this,t),Object(c.a)(this,Object(d.a)(t).call(this,e))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"genRows",value:function(){var e=this;return this.props.items.map((function(t,a){return r.a.createElement(re,{key:t.id,data:t,onSelect:e.state.selectFunc,isActive:t.id==e.state.activeRow})}))}},{key:"genHeader",value:function(){return r.a.createElement(D.a.Row,null,r.a.createElement(D.a.HeaderCell,null,"Date"),r.a.createElement(D.a.HeaderCell,null,"Match"),r.a.createElement(D.a.HeaderCell,null,"Competition"))}},{key:"isValidData",value:function(){if(!1===this.props.items.every((function(e){var t="number"===typeof e.id,a=e.date instanceof Date,n="string"===typeof e.home,r="string"===typeof e.away,i="number"===typeof e.competitionID,s="string"===typeof e.competitionName;return t&&a&&n&&r&&i&&s})))throw new Error("every piece of data should have valid date, home, away, comp name")}}]),t}(H),se=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state.headerText="Match List",a.state.route="/matchlist",a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({isError:!0})}},{key:"loadData",value:function(e){console.log(e),e=e.matches.map((function(e){return B(e)})),this.setState({data:e,isLoaded:!0,isError:!1})}},{key:"routeToMatch",value:function(e){this.props.history.push("/view_match?id="+e.id+"&isbackable=true")}},{key:"renderLoaded",value:function(){return r.a.createElement("div",null,r.a.createElement("p",null," A list of all matches. Click on a match to view it in detail. "),r.a.createElement("div",null,r.a.createElement(ie,{totalPages:this.state.totalPages,onPageChange:this.handlePageChange.bind(this),page:this.state.page,paging:this.state.paging,onSelect:this.routeToMatch.bind(this),items:this.state.data})))}},{key:"renderSearch",value:function(){return r.a.createElement(Y.a,null,r.a.createElement(Y.a.Field,null,r.a.createElement(ne.a,{label:"Search",type:"text",name:"searchtext"})),r.a.createElement(Y.a.Group,{widths:"equal"},r.a.createElement(Y.a.Field,null,r.a.createElement(ne.a,{label:"Between",type:"date",name:"startdate",placeholder:"Start date"})),r.a.createElement(Y.a.Field,null,r.a.createElement(ne.a,{type:"date",name:"enddate",placeholder:"End date"})),r.a.createElement(Y.a.Field,null,r.a.createElement(ne.a,{label:"Competition",type:"text",name:"competition"}))),r.a.createElement(Y.a.Button,{onClick:this.submitHandler},"Submit"))}}]),t}(Z),le=Object(g.e)(se);var oe=function(e){if(void 0===e.text||void 0===e.label)throw new Error("text and label must be defined");return r.a.createElement("div",{style:{padding:"0px 15px 0px 15px"}},r.a.createElement("b",{style:{padding:"0px 0px 0px 15px"}}," ",e.label,":"),e.text)},ce=a(114),de=a.n(ce),ue=function(e){function t(e){var a;Object(l.a)(this,t),a=Object(c.a)(this,Object(d.a)(t).call(this,e));var n=void 0===e.id?new URLSearchParams(e.location.search).get("id"):e.id;if(void 0===n||null===n)throw new Error("id must be defined");return a.state={unstructuredData:[],data:[],isUnstructuredLoaded:!1,isLoaded:!1,isError:!1,id:n,headerText:"Loading"},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({isError:!0})}},{key:"loadData",value:function(){var e=this;fetch("/StructuredData?id="+this.state.id).then((function(e){return e.json()})).then((function(t){var a=F(t),n=a.date,r=n.getDate()+"/"+(n.getMonth()+1)+"/"+n.getFullYear(),i=a.home+" vs "+a.away+" on "+r;e.setState({data:a,isLoaded:!0,isError:!1,headerText:i})})).catch((function(t){return e.setState({isError:!0,isLoaded:!0})}))}},{key:"loadUnstructuredData",value:function(){var e=this;fetch("/getUnstructuredDataByMatchId?id="+this.state.id).then((function(e){return e.json()})).then((function(t){console.log(t);var a=t.unstructuredData.map((function(e){return U(e)}));console.log(a),e.setState({unstructuredData:a,isUnstructuredLoaded:!0,isError:!1})})).catch((function(t){return e.setState({isError:!0,isUnstructuredLoaded:!0})}))}},{key:"loadIfNotAlready",value:function(){!1===this.state.isLoaded&&this.loadData()}},{key:"loadUnstructuredIfNotAlready",value:function(){!1===this.state.isUnstructuredLoaded&&this.loadUnstructuredData()}},{key:"renderLoadedUnstructuredData",value:function(){}},{key:"renderLoaded",value:function(){var e=this.state.data.date,t=e.getDay()+"/"+e.getMonth()+"/"+e.getFullYear();return r.a.createElement("div",null,r.a.createElement(P.a,{textAlign:"left"},r.a.createElement(m.a,{basic:!0,size:"large"},r.a.createElement("b",null,"Date:"),t," ",r.a.createElement("b",null,"Competition:"),this.state.data.competitionName),r.a.createElement(b.a,null,"Unstructured Data"),r.a.createElement(_,{items:this.state.unstructuredData}),r.a.createElement(b.a,null,"Structured Data"),r.a.createElement(de.a,{src:this.state.data.data})))}},{key:"renderError",value:function(){return r.a.createElement(W.a,{negative:!0},r.a.createElement(W.a.Header,null,"An error has occured"),r.a.createElement("p",null,"Failed to get data from the server."),r.a.createElement(E.a,{color:"red",onClick:this.loadData.bind(this)},"Try Again?"))}},{key:"routeToData",value:function(e){this.props.history.push("/structured_data_page?id="+e.id+"&isbackable=true")}},{key:"renderLoading",value:function(){return r.a.createElement($.a,null,"Loading Data")}},{key:"executeRender",value:function(){return this.state.isError?this.renderError():this.state.isLoaded?this.renderLoaded():this.renderLoading()}},{key:"render",value:function(){return this.loadIfNotAlready(),this.loadUnstructuredIfNotAlready(),r.a.createElement("div",{className:"page"},r.a.createElement(C,{header:this.state.headerText,sidebarVisible:this.props.sidebarVisible,handleSidebarClick:this.props.handleSidebarClick}),r.a.createElement("br",null),r.a.createElement("div",{id:"container",style:{minHeight:"100vh"}},this.executeRender()))}}]),t}(n.Component),he=Object(g.e)(ue);function me(e){return null===e||void 0===e?"Entire Corpus":e instanceof O?function(e){var t=e.date;return t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()+" - "+e.competitionName+" : "+(e.home+" vs "+e.away)}(e):e instanceof w?function(e){var t=e.published,a=t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear(),n=e.author,r=e.title;return r.length>A&&(r=r.substring(0,A-3)+"..."),a+" - "+n+" : "+r}(e):"Entire Corpus"}function pe(e){if(e.data.edit instanceof j==0)throw Error("props.data must be an instance of edit");var t=e.data.edit,a=e.data.target,n=void 0!=e.onSelect?e.onSelect:function(){},i=void 0!==e.onOrderChange?e.onOrderChange:function(){};return r.a.createElement(D.a.Row,null,r.a.createElement(D.a.Cell,{onClick:function(){return n(e.data.edit)},active:e.isActive},me(a)),r.a.createElement(D.a.Cell,{onClick:function(){return n(e.data.edit)},active:e.isActive},function(e){switch(e.type){case"replace":return"Replace";case"replacewithfield":return"Replace with Field";case"sequentialreplace":return"Sequential Replace";default:return"Error"}}(t)),r.a.createElement(D.a.Cell,{onClick:function(){return n(e.data.edit)},active:e.isActive},function(e){switch(e.type){case"replace":return r.a.createElement("div",null,r.a.createElement("i",null,"Replace: ")," ",e.replace,"  ",r.a.createElement("i",null," - with - "),"  ",e.replaceWith);case"replacewithfield":return r.a.createElement("div",null,r.a.createElement("i",null,"Replace: ")," ",e.replace,"  ",r.a.createElement("i",null," - with - "),"  ",e.replaceWith,r.a.createElement("i",null," - on field - "),"  ",e.settings.field," ");case"sequentialreplace":var t=e.replace.split(","),a=e.replaceWith.split(","),n=t.map((function(e,t){return r.a.createElement("div",null,e," ",r.a.createElement("i",null," - with - ")," ",a[t])}));return n.length<=5?r.a.createElement("div",null,r.a.createElement("i",null,"Replace All: ")," ",n):(n=n.slice(0,5),r.a.createElement("div",null,r.a.createElement("i",null,"Replace All: ")," ",n,r.a.createElement("div",null,"...")));default:return"Error"}}(t)),r.a.createElement(D.a.Cell,null,r.a.createElement("div",null,r.a.createElement(E.a,{onClick:function(){return i(!0,e.data.edit)}},"Up"),r.a.createElement(E.a,{onClick:function(){return i(!1,e.data.edit)}},"Down"))))}var fe=function(e){function t(e){var a;Object(l.a)(this,t);var n=void 0;return n=void 0!=(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).props.onOrderChange?function(e,t){a.props.onOrderChange(e,t)}:function(){},a.state.onOrderChangeFunc=n,a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"genRows",value:function(){var e=this;return this.props.items.edits.map((function(t,a){return r.a.createElement(pe,{key:t.editID,data:{edit:t,target:e.props.items.targets[a]},onSelect:e.state.selectFunc,onOrderChange:e.state.onOrderChangeFunc,isActive:t.id==e.state.activeRow})}))}},{key:"genHeader",value:function(){return r.a.createElement(D.a.Row,null,r.a.createElement(D.a.HeaderCell,null,"Target"),r.a.createElement(D.a.HeaderCell,null,"Type"),r.a.createElement(D.a.HeaderCell,null,"Summary"),r.a.createElement(D.a.HeaderCell,null,"Order"))}},{key:"isValidData",value:function(){if(!1===this.props.items.edits.every((function(e){var t=Number.isInteger(e.editID),a=e.isCorpus||Number.isInteger(e.structuredDataID)||Number.isInteger(e.unstructuredDataID),n="string"==typeof e.type,r="object"==typeof e.settings&&"replacewithfield"!=e.type||"replacewithfield"==e.type&&"object"==typeof e.settings&&void 0!==e.settings&&null!==e.settings&&"string"==typeof e.settings.field,i="string"==typeof e.replace,s="string"==typeof e.replaceWith;return t&&a&&n&&r&&i&&s})))throw new Error("every piece of data should be a valid edit")}}]),t}(H),ge=a(436),ve=a(429),Ee=function(e){function t(e){var a;if(Object(l.a)(this,t),"function"!=typeof(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).props.onSelect)throw Error("Choose Data Modal requires onSelect prop which is a function");return a.state={isLoaded:!1,data:void 0,isError:!1,lastSelectedId:-1,lastSelectedIsStructued:!1,isModalOpen:!1,selectedItem:void 0,isNoChooseError:!1},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({isError:!0})}},{key:"loadData",value:function(){var e=this;fetch("/allchooseableData").then((function(e){return e.json()})).then((function(t){t.structuredData=t.structuredData.map((function(e){return F(e)})),t.unstructuredData=t.unstructuredData.map((function(e){return U(e)})),e.setState({data:t,isLoaded:!0,isError:!1})})).catch((function(t){return e.setState({isError:!0})}))}},{key:"handleChooseButtonClick",value:function(){-1!=this.state.lastSelectedId?(this.props.onSelect(this.state.selectedItem),this.handleClose()):this.setState({isNoChooseError:!0})}},{key:"handleSelection",value:function(e){var t=e instanceof O===!0;this.state.lastSelectedIsStructued===t&&e.id===this.state.lastSelectedId?(this.props.onSelect(e),this.setState({isModalOpen:!1,isNoChooseError:!1})):this.setState({lastSelectedIsStructued:t,lastSelectedId:e.id,selectedItem:e})}},{key:"renderLoaded",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(ge.a,{menu:{pointing:!0},panes:[{menuItem:"Structured Data",render:function(){return r.a.createElement(ge.a.Pane,null,r.a.createElement(ee,{items:e.state.data.structuredData,onSelect:e.handleSelection.bind(e)}))}},{menuItem:"Unstructured Data",render:function(){return r.a.createElement(ge.a.Pane,null,r.a.createElement(_,{items:e.state.data.unstructuredData,onSelect:e.handleSelection.bind(e)}))}}]}),r.a.createElement(W.a,{warning:!0,attached:!0,hidden:!this.state.isNoChooseError},"Please select an item before clicking choose. You can select an item by clicking on a table row"),r.a.createElement("br",null),r.a.createElement(E.a,{primary:!0,onClick:this.handleChooseButtonClick.bind(this)},"Choose"))}},{key:"renderError",value:function(){return r.a.createElement(W.a,{negative:!0},r.a.createElement(W.a.Header,null,"An error has occured"),r.a.createElement("p",null,"Failed to get data from the server."),r.a.createElement(E.a,{color:"red",onClick:this.loadData.bind(this)},"Try Again?"))}},{key:"renderLoading",value:function(){return r.a.createElement($.a,null,"Loading Data")}},{key:"executeRender",value:function(){return this.state.isError?this.renderError():this.state.isLoaded?this.renderLoaded():this.renderLoading()}},{key:"handleOpen",value:function(){this.setState({isModalOpen:!0})}},{key:"handleClose",value:function(){this.setState({isModalOpen:!1,lastSelectedId:-1,lastSelectedIsStructued:!1,isNoChooseError:!1,selectedItem:void 0})}},{key:"render",value:function(){var e=this;return r.a.createElement(ve.a,{closeIcon:!0,onOpen:function(){!1===e.state.isLoaded&&e.loadData()}.bind(this),trigger:r.a.createElement(E.a,{primary:!0,onClick:this.handleOpen.bind(this)},void 0!==this.props.text?this.props.text:"Change"),onClose:this.handleClose.bind(this),open:this.state.isModalOpen},r.a.createElement(ve.a.Header,null,"Choose Data"),r.a.createElement(ve.a.Content,null,r.a.createElement(ve.a.Description,null,r.a.createElement(b.a,null,"Please select a piece of data to apply the edit to"),r.a.createElement("br",null)),this.executeRender()))}}]),t}(n.Component),be=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state.headerText="Edit List",a.state.route="editList",a.state.replaceTypes=a.genDropDownItems(V,R),a.state.isCorpusSearchChecked=void 0,a.state.corpusChoices=a.genDropDownItems([!0,!1],["yes","no"]),a.state.searchTarget=void 0,a.state.unstructuredDataSearches={},a.state.structuredDataSearches={},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"genBody",value:function(){return{editSearches:Object.values(this.state.searches),unstructuredDataSearches:Object.values(this.state.unstructuredDataSearches),structuredDataSearches:Object.values(this.state.structuredDataSearches)}}},{key:"handleTextSearchChange",value:function(e,t){var a=t.name,n=t.value;this.state.unstructuredDataSearches[a]=new L("text",n,["author","title"]),this.state.structuredDataSearches[a]=new L("text",n,["competitionName","home","away"]),this.handleSearchChange(a,new L("text",n,["replace","replaceWith","type"]))}},{key:"handleOrderChange",value:function(e,t){var a=this,n=JSON.stringify({isUp:e,edit:t});this.setState({isLoaded:!1}),fetch("reorder_edit",{method:"POST",body:n,headers:{"Content-Type":"application/json"}}).then((function(e){if(!e.ok)throw 404==e.status?new Error(404):new Error(500);console.log("sending request"),a.sendRequest(a.state.searches)})).catch((function(e){console.log(e),a.setState({isError:!0})}))}},{key:"genDataSummaryText",value:function(){var e=me(this.state.searchTarget);return"Entire Corpus"===e?"No Data Selected":e}},{key:"genDropDownItems",value:function(e,t){return e.map((function(e,a){var n=void 0!==t?t[a]:e.replace(/([a-z])([A-Z][a-z])/g,"$1 $2").charAt(0).toUpperCase()+e.slice(1).replace(/([a-z])([A-Z][a-z])/g,"$1 $2");return{key:e,text:n,value:e}}))}},{key:"handleChosenData",value:function(e){this.setState({isCorpusSearchChecked:!1,searchTarget:e}),e instanceof O?this.handleSearchChange("target",new L("exact",e.id,"structuredDataID")):e instanceof w?this.handleSearchChange("target",new L("exact",e.id,"unstructuredDataID")):this.setState({isError:!0})}},{key:"componentDidCatch",value:function(e,t){this.setState({isError:!0})}},{key:"loadData",value:function(e){var t=e.editList.map((function(e){return q(e)})),a=e.unstructuredData.map((function(e){return U(e)})),n=e.structuredData.map((function(e){return F(e)})).concat(a),r=[];t.forEach((function(e,t){return r[t]=n.find((function(t){return t.id===e.structuredDataID||t.id===e.unstructuredDataID}))})),this.setState({data:t,isLoaded:!0,isError:!1,target:r})}},{key:"renderSearch",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Y.a.Input,{placeholder:"search",name:"search",icon:"search",onChange:this.handleTextSearchChange.bind(this)}),r.a.createElement(Y.a.Group,{inline:!0},r.a.createElement(Y.a.Select,{clearable:!0,placeholder:"Search by Type",name:"type",options:this.state.replaceTypes,label:"Type:",onChange:function(t,a){var n=a.name,r=a.value;return e.handleSearchChange(n,new L("exact",r,"type"))}}),r.a.createElement(Y.a.Select,{clearable:!0,placeholder:"yes/no",name:"isCorpus",options:this.state.corpusChoices,label:"Entire Corpus:",value:this.state.isCorpusSearchChecked,onChange:function(t,a){var n=a.name,r=a.value;e.setState({isCorpusSearchChecked:r},(function(){return e.handleSearchChange(n,new L("exact",r,"isCorpus"))}))}}),!!this.state.isCorpusSearchChecked||r.a.createElement(oe,{label:"Data",text:this.genDataSummaryText()}),!!this.state.isCorpusSearchChecked||r.a.createElement(Ee,{onSelect:this.handleChosenData.bind(this)})))}},{key:"renderLoaded",value:function(){return console.log(this.state.data),r.a.createElement("div",null,r.a.createElement("p",null," A list of all edits. Click on an edit to view it in detail "),r.a.createElement("div",{id:"container"},r.a.createElement(fe,{totalPages:this.state.totalPages,onOrderChange:this.handleOrderChange.bind(this),onPageChange:this.handlePageChange.bind(this),page:this.state.page,paging:this.state.paging,onSelect:this.routeToEdit.bind(this),items:{edits:this.state.data,targets:this.state.target}})))}},{key:"routeToEdit",value:function(e){this.props.history.push("/add_edit?id="+e.editID+"&isbackable=true")}}]),t}(Z),ye=Object(g.e)(be),Ce=function(e){function t(e){var a;Object(l.a)(this,t),a=Object(c.a)(this,Object(d.a)(t).call(this,e));var n=Number.parseInt(e.id);if(void 0!==a.props.id&&null!==a.props.id&&!1===Number.isInteger(n))throw new Error("Id must be a number");if(void 0!==e.data&&e.data instanceof j===!1)throw new Error("inputted data must be of type edit");return a.state={data:e.data,target:e.target,queryId:n,isNew:(void 0===a.props.id||null===a.props.id)&&void 0===e.data,isMissing:!1,isError:!1,hasData:void 0!==e.data,isSaveSuccessful:!1,replaceTypes:a.genDropDownItems(V,R),fieldTypes:a.genDropDownItems(T),isSaving:!1,isSaveAttempted:!1,isValid:{settings:{}}},a.state.isNew&&(a.state.data=new j(null,null,null,!1,{},"","","")),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"genDropDownItems",value:function(e,t){return e.map((function(e,a){var n=void 0!==t?t[a]:e.replace(/([a-z])([A-Z][a-z])/g,"$1 $2").charAt(0).toUpperCase()+e.slice(1).replace(/([a-z])([A-Z][a-z])/g,"$1 $2");return{key:e,text:n,value:e}}))}},{key:"genIsError",value:function(e,t){var a=this.state,n=a.isValid,r=a.isSaveAttempted;return void 0===n[e]||!0===n[e]||!1===r?void 0:{content:t}}},{key:"genIsErrorSettings",value:function(e,t){var a=this.state,n=a.isValid,r=a.isSaveAttempted;return void 0===n.settings||n.settings[e]||n.settings[e]||!1===r?void 0:{content:t}}},{key:"genDataSummaryText",value:function(){var e=me(this.state.target);return"Entire Corpus"===e?"No Data Selected":e}},{key:"updateSettingsOnTypeChange",value:function(e){switch(e.type){case"replace":return void delete e.settings.field;case"replacewithfield":return void(e.settings.field=void 0)}}},{key:"isEditValid",value:function(e){var t=this,a={},n=!0;return Object.keys(e).forEach((function(r){var i=t.isFieldValid(e,r);a[r]=i,n=!!n&&i})),a.settings={},void 0!==e.settings&&null!==e.settings||(e.settings={}),Object.keys(e.settings).forEach((function(r){var i=t.isSettingValid(e,r);a.settings[r]=!0,n=!!n&&i})),this.setState({isValid:a}),n}},{key:"isFieldValid",value:function(e,t){var a=e[t],n=function(e){return e.length>0};switch(t){case"replace":return n(a);case"type":return V.includes(a);case"isCorpus":return!0===a&&null==e.structuredDataID&&null==e.unstructuredDataID||!1===a&&(Number.isInteger(e.structuredDataID)||Number.isInteger(e.unstructuredDataID));case"replaceWith":return n(a);case"editID":return Number.isInteger(a)||void 0===a||null===a;case"settings":return"object"===typeof a;case"structuredDataID":return Number.isInteger(a)&&null===e.unstructuredDataID&&!1===e.isCorpus||null===a&&(e.isCorpus||Number.isInteger(e.unstructuredDataID));case"unstructuredDataID":return Number.isInteger(a)&&null===e.structuredDataID&&!1===e.isCorpus||null===a&&(e.isCorpus||Number.isInteger(e.structuredDataID));case"order":return!0;default:return!1}}},{key:"isSettingValid",value:function(e,t){var a=e.settings[t];switch(t){case"field":return T.includes(a);case"fields":return a.every((function(e){return T.includes(e)}));default:return!1}}},{key:"handleChange",value:function(e,t){var a=t.name,n=t.value,r=this.state.data;r[a]=n,this.updateSettingsOnTypeChange(r),this.state.isValid[a]=this.isFieldValid(r,a),this.setState({data:r,isValid:this.state.isValid})}},{key:"handleSettingChange",value:function(e,t){var a=t.name,n=t.value,r=this.state.data;r.settings[a]=n,this.state.isValid.settings[a]=this.isSettingValid(r,a),this.setState({data:r,isValid:this.state.isValid})}},{key:"handleChecked",value:function(){var e=this.state.data;e.isCorpus=!e.isCorpus,e.isCorpus&&(e.unstructuredDataID=null,e.structuredDataID=null),this.state.isValid.isCorpus=this.isFieldValid(e,"isCorpus"),this.setState({data:e,isValid:this.state.isValid,target:void 0})}},{key:"handleChosenData",value:function(e){var t=this.state.data;t.structuredDataID=null,t.unstructuredDataID=null,e instanceof O?t.structuredDataID=e.id:e instanceof w?t.unstructuredDataID=e.id:this.setState({isError:!0}),this.state.isValid.isCorpus=this.isFieldValid(t,"isCorpus"),this.setState({data:t,isValid:this.state.isValid,target:e})}},{key:"loadData",value:function(){var e=this;fetch("/edit?id="+this.state.queryId).then((function(e){if(e.ok)return e.json();throw 404==e.status?new Error(404):new Error(500)})).then((function(t){var a=q(t.edit),n=void 0!==t.unstructuredData&&null!==t.unstructuredData?U(t.unstructuredData):void 0,r=void 0!==t.structuredData&&null!==t.structuredData?F(t.structuredData):void 0,i=void 0===n?r:n;e.setState({data:a,hasData:!0,isError:!1,target:i})})).catch((function(t){switch(t.message){case"404":return void(e.state.isMissing||e.setState({isMissing:!0}));default:return void(e.state.isError||e.setState({isError:!0}))}}))}},{key:"saveData",value:function(){var e=this;console.log("saving");var t=this.state.isNew?"POST":"PUT";this.isEditValid(this.state.data)?(console.log("savingss"),this.setState({isSaving:!0}),fetch("/edit",{method:t,body:JSON.stringify(this.state.data),headers:{"Content-Type":"application/json"}}).then((function(t){console.log("response"),t.ok?e.state.isNew?e.setState({data:new j(null,null,null,!1,{},"","",""),isSaveSuccessful:!0,isSaveAttempted:!1,isSaving:!1}):e.props.history.goBack():e.setState({isError:!0,hasData:!1,isSaving:!1})}))):this.setState({isSaveAttempted:!0})}},{key:"deleteData",value:function(){var e=this;fetch("/edit?id="+this.state.data.editID,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(t){t.ok?e.props.history.goBack():e.setState({isError:!0,hasData:!1})}))}},{key:"loadIfNotAlready",value:function(){!1===this.state.hasData&&!1===this.state.isNew&&this.loadData()}},{key:"renderReplaceFieldOptions",value:function(){if("replacewithfield"==this.state.data.type)return r.a.createElement(Y.a.Group,{inline:!0},r.a.createElement(Y.a.Select,{error:this.genIsErrorSettings("field","Please select a field"),placeholder:"Choose Field",name:"field",options:this.state.fieldTypes,value:this.state.data.settings.field,label:"Field:",onChange:this.handleSettingChange.bind(this)}))}},{key:"renderSeqReplaceFieldOptions",value:function(){if("sequentialreplace"==this.state.data.type&&(void 0==this.state.target||this.state.target instanceof O))return void 0==this.state.data.settings.fields&&(this.state.data.settings.fields=[]),r.a.createElement("div",null,r.a.createElement(Y.a.Group,{inline:!0},r.a.createElement(Y.a.Select,{multiple:!0,selection:!0,error:this.genIsErrorSettings("field","Please select a field"),placeholder:"Choose Field",name:"fields",options:this.state.fieldTypes,value:this.state.data.settings.fields,label:"Fields:",onChange:this.handleSettingChange.bind(this)})),this.renderSeqReplaceFieldWarningMessage())}},{key:"renderSeqReplaceFieldWarningMessage",value:function(){if(Array.isArray(this.state.data.settings.fields)&&this.state.data.settings.fields.length>0&&this.state.data.isCorpus)return r.a.createElement(W.a,{warning:!0,visible:!0},"When you select a field on this type of edit, it means that the edit will only apply to structured data (matches)")}},{key:"renderHasData",value:function(){var e=this.state.data.isCorpus;return r.a.createElement(P.a,null,r.a.createElement(Y.a,{size:"large",loading:this.state.isSaving||!this.state.hasData&&!this.state.isNew},r.a.createElement(Y.a.Group,{inline:!0},r.a.createElement(Y.a.Select,{error:this.genIsError("type","Please select a type"),placeholder:"Choose Type",name:"type",options:this.state.replaceTypes,value:this.state.data.type,label:"Type:",onChange:this.handleChange.bind(this)}),r.a.createElement(Y.a.Checkbox,{error:this.genIsError("isCorpus","Please tick apply to corpus or choose data"),name:"isCorpus",label:"Apply to Entire Corpus",checked:this.state.data.isCorpus,onChange:this.handleChecked.bind(this)}),e?void 0:r.a.createElement(oe,{label:"Data",text:this.genDataSummaryText()}),e?void 0:r.a.createElement(Ee,{onSelect:this.handleChosenData.bind(this)})),r.a.createElement(Y.a.Group,{inline:!0},r.a.createElement(Y.a.Input,{error:this.genIsError("replace","Please enter text to replace"),placeholder:"text",name:"replace",label:"Replace:",value:this.state.data.replace,onChange:this.handleChange.bind(this)}),r.a.createElement(Y.a.Input,{error:this.genIsError("replaceWith","Please enter text to replace with "),placeholder:"text",name:"replaceWith",label:"with",value:this.state.data.replaceWith,onChange:this.handleChange.bind(this)})),this.renderReplaceFieldOptions(),this.renderSeqReplaceFieldOptions(),r.a.createElement(Y.a.Group,{widths:"equal"},r.a.createElement(E.a,{primary:!0,onClick:this.saveData.bind(this)}," Save "),this.state.isNew?"":r.a.createElement(E.a,{negative:!0,onClick:this.deleteData.bind(this)}," Delete "))))}},{key:"renderErrorWithoutData",value:function(){return r.a.createElement(W.a,{negative:!0},r.a.createElement(W.a.Header,null,"An error has occured"),r.a.createElement("p",null,"Failed to get data from the server."),r.a.createElement(E.a,{color:"red",onClick:this.loadData.bind(this)},"Try Again?"))}},{key:"renderErrorWithData",value:function(){return r.a.createElement(W.a,{negative:!0},r.a.createElement(W.a.Header,null,"An error has occured"),r.a.createElement("p",null,"Something has gone wrong! Reloading the page may fix the issue"))}},{key:"renderMissing",value:function(){return r.a.createElement(W.a,{warning:!0},r.a.createElement(W.a.Header,null,"We couldn't find what you are looking for "),r.a.createElement("p",null,"404: We tried really hard and couldn't find the data you wanted :("))}},{key:"renderSaveSuccessful",value:function(){if(this.state.isSaveSuccessful)return r.a.createElement(W.a,{positive:!0},r.a.createElement(W.a.Header,null,"Successfully added an edit to the corpus!"))}},{key:"executeRender",value:function(){return(this.state.isNew||this.state.hasData)&&this.state.isError?this.renderErrorWithData():this.state.isMissing?this.renderMissing():this.state.isError?this.renderErrorWithoutData():this.state.hasData||this.state.isNew?this.renderHasData():void 0}},{key:"render",value:function(){return this.loadIfNotAlready(),r.a.createElement("div",null,this.executeRender(),this.renderSaveSuccessful())}}]),t}(n.Component),Se=Object(g.e)(Ce);var ke=Object(g.e)((function(e){var t=void 0===e.id?new URLSearchParams(e.location.search).get("id"):e.id,a=!(void 0===t||null===t)?"Create new Edit":"View Edit";return r.a.createElement("div",{className:"page"},r.a.createElement(C,{header:a,sidebarVisible:e.sidebarVisible,handleSidebarClick:e.handleSidebarClick}),r.a.createElement("div",{id:"container",style:{minHeight:"100vh"}},r.a.createElement(Se,{id:t,data:e.data,target:e.target})))})),De=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={items:[],isSaving:!1,isLoaded:!1,isImportSuccessful:!1,isError:!1,request:new N},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"genDropDownItems",value:function(e,t){return e.map((function(e,a){var n=void 0!==t?t[a]:e.replace(/([a-z])([A-Z][a-z])/g,"$1 $2").charAt(0).toUpperCase()+e.slice(1).replace(/([a-z])([A-Z][a-z])/g,"$1 $2");return{key:e,text:n,value:e}}))}},{key:"loadData",value:function(){var e=this;fetch("/competitions").then((function(e){return e.json()})).then((function(t){var a=t.map((function(e){return z(e)})),n=a.map((function(e){return e.id})),r=a.map((function(e){return e.name}));e.setState({items:e.genDropDownItems(n,r),isLoaded:!0,isError:!1})})).catch((function(t){return e.setState({isError:!0})}))}},{key:"loadIfNotAlready",value:function(){!1===this.state.isLoaded&&!1===this.state.isError&&this.loadData()}},{key:"handleChange",value:function(e,t){var a=t.name,n=t.value,r=this.state.request;if("begin"===a||"end"===a){var i=n.split("-");n=new Date(i[0],Number.parseInt(i[1])-1,i[2],0,0,0,0)}r[a]=n,this.setState({request:r})}},{key:"saveData",value:function(){var e=this;this.setState({isSaving:!0}),fetch("/importdata",{method:"POST",body:JSON.stringify(this.state.request),headers:{"Content-Type":"application/json"}}).then((function(t){t.ok?e.setState({isSaving:!1,isError:!1,isImportSuccessful:!0},(function(){return console.log(e.state)})):e.setState({isError:!0})}))}},{key:"renderErrorMessage",value:function(){if(this.state.isError)return r.a.createElement(W.a,{negative:!0},r.a.createElement(W.a.Header,null,"An error has occured"),r.a.createElement("p",null,"Something has gone wrong! Reloading the page may fix the issue"))}},{key:"renderSuccessMessage",value:function(){if(this.state.isImportSuccessful)return r.a.createElement(W.a,{positive:!0},r.a.createElement(W.a.Header,null,"Successfully imported data into the corpus!"))}},{key:"render",value:function(){return this.loadIfNotAlready(),r.a.createElement("div",{className:"page"},r.a.createElement(C,{header:"Import Structured Data",sidebarVisible:this.props.sidebarVisible,handleSidebarClick:this.props.handleSidebarClick}),r.a.createElement("div",{id:"container",style:{height:"100vh"}},r.a.createElement("br",null),r.a.createElement(P.a,null,r.a.createElement(Y.a,{loading:!this.state.isLoaded||this.state.isSaving},r.a.createElement(Y.a.Group,{inline:!0},r.a.createElement(Y.a.Input,{placeholder:"dd/mm/yyyy",name:"begin",label:"Begin:",type:"date",onChange:this.handleChange.bind(this)}),r.a.createElement(Y.a.Input,{placeholder:"dd/mm/yyyy",name:"end",label:"End:",type:"date",onChange:this.handleChange.bind(this)}),r.a.createElement(Y.a.Select,{label:"Competition",name:"compId",options:this.state.items,onChange:this.handleChange.bind(this)})),r.a.createElement(E.a,{primary:!0,onClick:this.saveData.bind(this)},"Import")),this.renderSuccessMessage(),this.renderErrorMessage())))}}]),t}(n.Component),we=a(62),Oe=function(e){function t(e){var a;if(Object(l.a)(this,t),"function"!=typeof(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).props.onSelect)throw Error("Choose Match Modal requires onSelect prop which is a function");return a.state={isLoaded:!1,data:["sss"],isError:!1,lastSelectedId:-1,isModalOpen:!1,selectedItem:void 0,isNoChooseError:!1},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({isError:!0})}},{key:"loadData",value:function(){var e=this;fetch("/matchList").then((function(e){return e.json()})).then((function(t){var a=t.matches.map((function(e){return B(e)}));e.setState({data:a,isLoaded:!0,isError:!1})})).catch((function(t){e.setState({isError:!0})}))}},{key:"handleChooseButtonClick",value:function(){-1!=this.state.lastSelectedId?(this.props.onSelect(this.state.selectedItem),this.handleClose()):this.setState({isNoChooseError:!0})}},{key:"handleSelection",value:function(e){e.id===this.state.lastSelectedId?(this.props.onSelect(e),this.setState({isModalOpen:!1,isNoChooseError:!1})):this.setState({lastSelectedId:e.id,selectedItem:e})}},{key:"renderLoaded",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(ge.a,{menu:{pointing:!0},panes:[{menuItem:"Match",render:function(){return r.a.createElement(ge.a.Pane,null,r.a.createElement(ie,{items:e.state.data,onSelect:e.handleSelection.bind(e)}))}}]}),r.a.createElement(W.a,{warning:!0,attached:!0,hidden:!this.state.isNoChooseError},"Please select an item before clicking choose. You can select an item by clicking on a table row"),r.a.createElement("br",null),r.a.createElement(E.a,{primary:!0,onClick:this.handleChooseButtonClick.bind(this)},"Choose"))}},{key:"renderError",value:function(){return r.a.createElement(W.a,{negative:!0},r.a.createElement(W.a.Header,null,"An error has occured"),r.a.createElement("p",null,"Failed to get data from the server."),r.a.createElement(E.a,{color:"red",onClick:this.loadData.bind(this)},"Try Again?"))}},{key:"renderLoading",value:function(){return r.a.createElement($.a,null,"Loading Data")}},{key:"executeRender",value:function(){return this.state.isError?this.renderError():this.state.isLoaded?this.renderLoaded():this.renderLoading()}},{key:"handleOpen",value:function(){this.setState({isModalOpen:!0})}},{key:"handleClose",value:function(){this.setState({isModalOpen:!1,lastSelectedId:-1,isNoChooseError:!1,selectedItem:void 0})}},{key:"render",value:function(){var e=this;return r.a.createElement(ve.a,{closeIcon:!0,onOpen:function(){!1===e.state.isLoaded&&e.loadData()}.bind(this),trigger:r.a.createElement(E.a,{primary:!0,type:"button",onClick:this.handleOpen.bind(this)},void 0!==this.props.text?this.props.text:"Change"),onClose:this.handleClose.bind(this),open:this.state.isModalOpen},r.a.createElement(ve.a.Header,null,"Choose Match"),r.a.createElement(ve.a.Content,null,r.a.createElement(ve.a.Description,null,r.a.createElement(b.a,null,"Please select a match"),r.a.createElement("br",null)),this.executeRender()))}}]),t}(n.Component),Ie=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).changeHandler=function(e){e.preventDefault(),a.setState(Object(k.a)({},e.target.name,e.target.value))},a.submit=function(e){e.preventDefault(),console.log(a.state.published);var t=a.state.published.split("-"),n=new Date(t[0],t[1]-1,t[2],0,0,0);t=a.state.extracted.split("-");var r=new Date(t[0],t[1]-1,t[2],0,0,0),i=new w(a.state.id,a.state.matchid,a.state.title,a.state.author,a.state.url,n,r,a.state.data);if(a.valid(i)){console.log(i);var s=new XMLHttpRequest,l="PUT",o="?id=".concat(a.state.id);a.state.exists||(l="POST",o=""),s.open(l,"/unstructuredData"+o,!0),s.setRequestHeader("Content-Type","application/json"),s.send(JSON.stringify(i)),s.onload=function(){200!=s.status?this.setState({message:"Error ".concat(s.status,": ").concat(s.statusText),hasMessage:!0}):this.state.exists?this.props.history.goBack():this.setState({id:void 0,match:"",matchid:0,title:"New unstructured data",author:"",url:"",published:"",extracted:"",data:""})}.bind(Object(we.a)(a)),s.onerror=function(){this.setState({message:"save failed",hasMessage:!0})}.bind(Object(we.a)(a))}},a.delete=function(e){if(e.preventDefault(),a.state.exists){var t=new XMLHttpRequest;console.log(a.state.id),t.open("DELETE","/unstructuredData?id=".concat(a.state.id),!0),t.setRequestHeader("Content-Type","application/json"),t.send(),t.onload=function(){200!=t.status?this.setState({message:"Error ".concat(t.status,": ").concat(t.statusText),hasMessage:!0}):this.props.history.goBack()}.bind(Object(we.a)(a)),t.onerror=function(){this.setState({message:"delete failed",hasMessage:!0})}.bind(Object(we.a)(a))}},a.state={id:new URLSearchParams(e.location.search).get("id"),matchid:"",title:"New unstructured data",author:"",published:"",extracted:"",url:"",match:"",data:"",exists:!1,message:"",hasMessage:!1},null!==a.state.id&&a.load(),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"valid",value:function(e){return""===e.title?(alert("title is required"),!1):""!==e.author||(alert("author is required"),!1)}},{key:"load",value:function(){var e=this;fetch("unstructuredData?id="+this.state.id).then((function(e){return e.json()})).then((function(t){if(console.log(t),null!==t.unstructuredData.extracted){var a=t.unstructuredData.extracted.split("-"),n="".concat(a[0],"-").concat(a[1],"-").concat(parseInt(a[2]));parseInt(a[2])<10&&(n=n.slice(0,-1)+"0"+parseInt(a[2]))}if(null!==t.unstructuredData.published){a=t.unstructuredData.published.split("-");var r="".concat(a[0],"-").concat(a[1],"-").concat(parseInt(a[2]));parseInt(a[2])<10&&(r=r.slice(0,-1)+"0"+parseInt(a[2]))}console.log(n+" "+r),e.setState({exists:!0,matchid:t.match.id,match:"".concat(t.match.home," vs ").concat(t.match.away),author:t.unstructuredData.author,title:t.unstructuredData.title,url:t.unstructuredData.url,data:t.unstructuredData.data,extracted:n,published:r})})).catch((function(e){console.log("error loading"+e)}))}},{key:"handleChosenMatch",value:function(e){console.log(e),this.setState({matchid:e.id,match:"".concat(e.home," vs ").concat(e.away)})}},{key:"render",value:function(){var e=this.state,t=(e.id,e.matchid,e.title),a=e.author,n=e.published,i=e.extracted,s=e.url,l=e.match,o=e.data,c=(e.exists,e.message),d=e.hasMessage;return r.a.createElement("div",{className:"page"},r.a.createElement(C,{header:t,sidebarVisible:this.props.sidebarVisible,handleSidebarClick:this.props.handleSidebarClick}),r.a.createElement(P.a,null,r.a.createElement("div",{id:"container",style:{height:"100vh"}},r.a.createElement("form",{className:"ui form"},r.a.createElement("div",{className:"inline fields"},r.a.createElement("div",{className:"one wide field"}),r.a.createElement("div",{className:"required ten wide field"},r.a.createElement("label",null,"Title"),r.a.createElement("input",{type:"text",name:"title",value:t,onChange:this.changeHandler})),r.a.createElement("div",{className:"required four wide field"},r.a.createElement("label",null,"Author"),r.a.createElement("input",{type:"text",name:"author",value:a,onChange:this.changeHandler}))),r.a.createElement("div",{className:"inline fields"},r.a.createElement("div",{className:"one wide field"}),r.a.createElement("div",{className:"five wide field"},r.a.createElement("label",null,"Published"),r.a.createElement("input",{type:"date",name:"published",value:n,onChange:this.changeHandler})),r.a.createElement("div",{className:"five wide field"},r.a.createElement("label",null,"Extracted"),r.a.createElement("input",{type:"date",name:"extracted",value:i,onChange:this.changeHandler})),r.a.createElement("div",{className:"four wide field"},r.a.createElement("label",null,"URL"),r.a.createElement("input",{type:"text",name:"url",value:s,onChange:this.changeHandler}))),r.a.createElement("div",{className:"inline fields"},r.a.createElement("div",{className:"one wide field"}),r.a.createElement("div",{className:"five wide field"},r.a.createElement("div",{className:"ui pointing below label"},"Content")),r.a.createElement("div",{className:"seven wide field"},r.a.createElement("label",null,"Match:"),r.a.createElement("label",null,l)),r.a.createElement("div",{className:"two wide field"},r.a.createElement(Oe,{onSelect:this.handleChosenMatch.bind(this)}))),r.a.createElement("div",{className:"inline fields"},r.a.createElement("div",{className:"one wide field"}),r.a.createElement("div",{className:"fourteen wide field"},r.a.createElement("textarea",{name:"data",value:o,onChange:this.changeHandler}))),r.a.createElement("div",{className:"inline fields"},r.a.createElement("div",{className:"one wide field"}),r.a.createElement("div",{className:"two wide field"},r.a.createElement("button",{className:"fluid ui primary button",type:"button"},"Toggle: edited")),r.a.createElement("div",{className:"eight wide field"},d?r.a.createElement(W.a,{negative:!0}," ",c," "):void 0),r.a.createElement("div",{className:"two wide field"},this.state.exists?r.a.createElement("button",{className:"fluid ui red button",type:"button",onClick:this.delete.bind(this)},"Delete"):""),r.a.createElement("div",{className:"two wide field"},r.a.createElement("button",{className:"fluid ui primary button",type:"button",onClick:this.submit.bind(this)},"Save")))))))}}]),t}(n.Component),je=Object(g.e)(Ie),xe=function(e){function t(e){var a;Object(l.a)(this,t);return(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={items:a.genDropDownItems(["json","xml"],["JSON","XML"]),type:"json",isLoaded:!0,isError:!1,request:new N,isExported:!1,export:void 0,exportedType:void 0},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"genDropDownItems",value:function(e,t){return e.map((function(e,a){var n=void 0!==t?t[a]:e.replace(/([a-z])([A-Z][a-z])/g,"$1 $2").charAt(0).toUpperCase()+e.slice(1).replace(/([a-z])([A-Z][a-z])/g,"$1 $2");return{key:e,text:n,value:e}}))}},{key:"loadData",value:function(){var e=this;this.setState({isLoaded:!1,isExported:!1,exportedType:this.state.type}),fetch("/export?type="+this.state.type).then((function(e){return e.text()})).then((function(t){var a=t;e.setState({export:a,isLoaded:!0,isError:!1,isExported:!0})})).catch((function(e){return console.log(e)}))}},{key:"handleChange",value:function(e,t){t.name;var a=t.value;this.setState({type:a})}},{key:"renderErrorMessage",value:function(){if(this.state.isError)return r.a.createElement(W.a,{negative:!0},r.a.createElement(W.a.Header,null,"An error has occured"),r.a.createElement("p",null,"Something has gone wrong! Reloading the page may fix the issue"))}},{key:"renderData",value:function(){if(this.state.isExported)return"json"===this.state.exportedType?r.a.createElement(P.a,{textAlign:"left"},this.state.export):r.a.createElement(P.a,{textAlign:"left"}," ",this.state.export)}},{key:"render",value:function(){return r.a.createElement("div",{className:"page"},r.a.createElement(C,{header:"Import Structured Data",sidebarVisible:this.props.sidebarVisible,handleSidebarClick:this.props.handleSidebarClick}),r.a.createElement("div",{id:"container",style:{minHeight:"100vh"}},r.a.createElement("br",null),r.a.createElement(P.a,null,r.a.createElement(Y.a,{loading:!this.state.isLoaded},r.a.createElement(Y.a.Group,{inline:!0},r.a.createElement(Y.a.Select,{label:"Export Type",name:"compId",options:this.state.items,onChange:this.handleChange.bind(this),value:this.state.type})),r.a.createElement(E.a,{primary:!0,onClick:this.loadData.bind(this)},"Export")),this.renderErrorMessage(),this.renderData())))}}]),t}(n.Component),Ne=function(e){function t(e){var a;Object(l.a)(this,t),a=Object(c.a)(this,Object(d.a)(t).call(this,e));var n=void 0===e.id?new URLSearchParams(e.location.search).get("id"):e.id;if(void 0===n||null===n)throw new Error("id must be defined");return a.state={data:[],isLoaded:!1,isError:!1,id:n,headerText:"Loading"},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({isError:!0})}},{key:"deleteData",value:function(){var e=this;fetch("/structureddata?id="+this.state.id,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(t){t.ok?e.props.history.goBack():e.setState({isError:!0,hasData:!1})}))}},{key:"loadData",value:function(){var e=this;fetch("/StructuredData?id="+this.state.id).then((function(e){return e.json()})).then((function(t){var a=F(t),n=a.date,r=n.getDate()+"/"+(n.getMonth()+1)+"/"+n.getFullYear(),i=a.home+" vs "+a.away+" on "+r;e.setState({data:a,isLoaded:!0,isError:!1,headerText:i})})).catch((function(t){return e.setState({isError:!0})}))}},{key:"loadIfNotAlready",value:function(){!1===this.state.isLoaded&&this.loadData()}},{key:"renderLoaded",value:function(){var e=this.state.data.date,t=e.getDay()+"/"+e.getMonth()+"/"+e.getFullYear();return r.a.createElement("div",null,r.a.createElement(P.a,{textAlign:"left"},r.a.createElement(m.a,{basic:!0,size:"large"},r.a.createElement("b",null,"Date:"),t," ",r.a.createElement("b",null,"Competition:"),this.state.data.competitionName),r.a.createElement("br",null),r.a.createElement(E.a,{negative:!0,onClick:this.deleteData.bind(this)},"Delete"),r.a.createElement("br",null),r.a.createElement(de.a,{src:this.state.data.data})))}},{key:"renderError",value:function(){return r.a.createElement(W.a,{negative:!0},r.a.createElement(W.a.Header,null,"An error has occured"),r.a.createElement("p",null,"Failed to get data from the server."),r.a.createElement(E.a,{color:"red",onClick:this.loadData.bind(this)},"Try Again?"))}},{key:"routeToData",value:function(e){this.props.history.push("/structured_data_page?id="+e.id+"&isbackable=true")}},{key:"renderLoading",value:function(){return r.a.createElement($.a,null,"Loading Data")}},{key:"executeRender",value:function(){return this.state.isError?this.renderError():this.state.isLoaded?this.renderLoaded():this.renderLoading()}},{key:"render",value:function(){return this.loadIfNotAlready(),r.a.createElement("div",{className:"page"},r.a.createElement(C,{header:this.state.headerText,sidebarVisible:this.props.sidebarVisible,handleSidebarClick:this.props.handleSidebarClick}),r.a.createElement("br",null),r.a.createElement("div",{id:"container",style:{minHeight:"100vh"}},this.executeRender()))}}]),t}(n.Component),Le=Object(g.e)(Ne),Ae=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={username:"",password:"",loggedIn:!1,incorrectLogin:!1,isError:!1,loginToken:{}},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"validData",value:function(){return!0}},{key:"handleChange",value:function(e,t){var a=t.name,n=t.value;this.setState(Object(k.a)({},a,n))}},{key:"handleButton",value:function(){var e=this;console.log(this.state.username),console.log(JSON.stringify({username:this.state.username,password:this.state.password})),fetch("/login",{method:"POST",body:JSON.stringify({username:this.state.username,password:this.state.password}),headers:{"Content-Type":"application/json"}}).then((function(t){console.log(t.status),t.ok?e.props.history.push("/"):400==t.status?e.setState({incorrectLogin:!0}):e.setState({isError:!0})})).catch((function(t){switch(t.message){case"400":return void(e.state.incorrectLogin||e.setState({incorrectLogin:!0}));default:return void(e.state.isError||e.setState({isError:!0}))}}))}},{key:"renderError",value:function(){return console.log(this.state),this.state.isError?r.a.createElement(W.a,{visible:!0,negative:!0},r.a.createElement(W.a.Header,null,"An error has occured"),r.a.createElement("p",null,"Failed to get data from the server.")):this.state.incorrectLogin?r.a.createElement(W.a,{visible:!0,negative:!0},r.a.createElement(W.a.Header,null,"Incorrect Login"),r.a.createElement("p",null,"Please recheck your login info.")):r.a.createElement("div",null)}},{key:"render",value:function(){return r.a.createElement("div",{className:"page"},r.a.createElement(v.a,{textAlign:"center",style:{minHeight:"100vh"},verticalAlign:"middle"},r.a.createElement(v.a.Column,{style:{maxWidth:450}},r.a.createElement(b.a,{as:"h2",textAlign:"center"},"Login"),r.a.createElement(Y.a,{size:"large"},r.a.createElement(m.a,null,r.a.createElement(Y.a.Input,{fluid:!0,icon:"user",iconPosition:"left",placeholder:"Username",name:"username",value:this.state.username,onChange:this.handleChange.bind(this)}),r.a.createElement(Y.a.Input,{fluid:!0,icon:"lock",iconPosition:"left",placeholder:"Password",name:"password",type:"password",value:this.state.password,onChange:this.handleChange.bind(this)}),r.a.createElement(E.a,{primary:!0,onClick:this.handleButton.bind(this)},"Login"))),r.a.createElement(W.a,null,r.a.createElement("a",{href:"../register-form"},"Sign Up")),this.renderError())))}}]),t}(n.Component),Te=Object(g.e)(Ae),Ve=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={username:"",password:"",repeat_password:"",regkey:"",passwordMismatch:!1,failedRegistration:!1,isError:!1},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"validData",value:function(){return!0}},{key:"handleChange",value:function(e,t){var a=t.name,n=t.value;this.setState(Object(k.a)({},a,n))}},{key:"handleButton",value:function(){var e=this;fetch("/register",{method:"POST",body:JSON.stringify({username:this.state.username,password:this.state.password,regkey:this.state.regkey}),headers:{"Content-Type":"application/json"}}).then((function(t){t.ok?e.props.history.push("/"):400==t.status?e.setState({failedRegistration:!0}):e.setState({isError:!0})})).catch((function(t){switch(t.message){case"400":return void(e.state.failedRegistration||e.setState({failedRegistration:!0}));default:return void(e.state.isError||e.setState({isError:!0}))}}))}},{key:"renderError",value:function(){return this.state.isError?r.a.createElement(W.a,{visible:!0,negative:!0},r.a.createElement(W.a.Header,null,"An error has occured"),r.a.createElement("p",null,"Failed to get data from the server.")):this.state.failedRegistration?r.a.createElement(W.a,{visible:!0,negative:!0},r.a.createElement(W.a.Header,null,"Registration unsuccessful"),r.a.createElement("p",null,"Please check your registration key and try again.")):r.a.createElement("div",null)}},{key:"render",value:function(){return r.a.createElement("div",{className:"page"},r.a.createElement(v.a,{textAlign:"center",style:{minHeight:"100vh"},verticalAlign:"middle"},r.a.createElement(v.a.Column,{style:{maxWidth:450}},r.a.createElement(b.a,{as:"h2",textAlign:"center"},"Register New User"),r.a.createElement(Y.a,{size:"large"},r.a.createElement(m.a,null,r.a.createElement(Y.a.Input,{fluid:!0,icon:"user",iconPosition:"left",placeholder:"Username",name:"username",value:this.state.username,onChange:this.handleChange.bind(this)}),r.a.createElement(Y.a.Input,{fluid:!0,icon:"lock",iconPosition:"left",placeholder:"Password",type:"password",name:"password",value:this.state.password,onChange:this.handleChange.bind(this)}),r.a.createElement(Y.a.Input,{fluid:!0,icon:"th",iconPosition:"left",placeholder:"Confirm password",name:"repeat_password",type:"password",value:this.state.repeat_password,onChange:this.handleChange.bind(this)}),r.a.createElement(Y.a.Input,{fluid:!0,icon:"key",iconPosition:"left",placeholder:"Registration key",name:"regkey",value:this.state.regkey,onChange:this.handleChange.bind(this)}),r.a.createElement(E.a,{primary:!0,onClick:this.handleButton.bind(this)},"Register Now"))),r.a.createElement(W.a,null,"If you alreay have an account, ",r.a.createElement("a",{href:"../login-form"},"sign in")))),this.renderError())}}]),t}(n.Component),Re=Object(g.e)(Ve),Pe=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(d.a)(t).call(this))).state={sidebarVisible:!0},e.handleSidebarClick=function(){e.setState({sidebarVisible:!e.state.sidebarVisible})},e}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(h.a.Pushable,{as:m.a},r.a.createElement(h.a,{as:p.a,animation:"push",icon:"labeled",inverted:!0,onHide:this.handleSidebarHide,vertical:!0,visible:this.state.sidebarVisible,width:"thin"},r.a.createElement(p.a.Item,{as:"a",href:"/"},"Home"),r.a.createElement(p.a.Item,{as:"a",href:"/unstructured_data_list"},"Unstructured Data List"),r.a.createElement(p.a.Item,{as:"a",href:"/structured_data_list"},"Structured Data List"),r.a.createElement(p.a.Item,{as:"a",href:"/match_list"},"Match List"),r.a.createElement(p.a.Item,{as:"a",href:"/edit_list"},"Edit List"),r.a.createElement(p.a.Item,{as:"a",href:"/add_edit"},"Add Edit"),r.a.createElement(p.a.Item,{as:"a",href:"/import_structured_data"},"Import Structured Data"),r.a.createElement(p.a.Item,{as:"a",href:"/add_unstructured_data"},"Add Unstructured Data"),r.a.createElement(p.a.Item,{as:"a",href:"/export"},"Export")),r.a.createElement(h.a.Pusher,null,r.a.createElement("div",{className:"App",style:{minHeight:"100vh"}},r.a.createElement(f.a,null,r.a.createElement(g.a,{exact:!0,path:"/",component:function(){return r.a.createElement(S,{sidebarVisible:e.state.sidebarVisible,handleSidebarClick:e.handleSidebarClick.bind(e)})}}),r.a.createElement(g.a,{path:"/unstructured_data_list",component:function(){return r.a.createElement(K,{sidebarVisible:e.state.sidebarVisible,handleSidebarClick:e.handleSidebarClick.bind(e)})}}),r.a.createElement(g.a,{path:"/structured_data_list",component:function(){return r.a.createElement(ae,{sidebarVisible:e.state.sidebarVisible,handleSidebarClick:e.handleSidebarClick.bind(e)})}}),r.a.createElement(g.a,{path:"/match_list",component:function(){return r.a.createElement(le,{sidebarVisible:e.state.sidebarVisible,handleSidebarClick:e.handleSidebarClick.bind(e)})}}),r.a.createElement(g.a,{path:"/view_match",component:function(){return r.a.createElement(he,{sidebarVisible:e.state.sidebarVisible,handleSidebarClick:e.handleSidebarClick.bind(e)})}}),r.a.createElement(g.a,{path:"/edit_list",component:function(){return r.a.createElement(ye,{sidebarVisible:e.state.sidebarVisible,handleSidebarClick:e.handleSidebarClick.bind(e)})}}),r.a.createElement(g.a,{path:"/add_edit",component:function(){return r.a.createElement(ke,{sidebarVisible:e.state.sidebarVisible,handleSidebarClick:e.handleSidebarClick.bind(e)})}}),r.a.createElement(g.a,{path:"/import_structured_data",component:function(){return r.a.createElement(De,{sidebarVisible:e.state.sidebarVisible,handleSidebarClick:e.handleSidebarClick.bind(e)})}}),r.a.createElement(g.a,{path:"/add_unstructured_data",component:function(){return r.a.createElement(je,{sidebarVisible:e.state.sidebarVisible,handleSidebarClick:e.handleSidebarClick.bind(e)})}}),r.a.createElement(g.a,{path:"/export",component:function(){return r.a.createElement(xe,{sidebarVisible:e.state.sidebarVisible,handleSidebarClick:e.handleSidebarClick.bind(e)})}}),r.a.createElement(g.a,{path:"/structured_data_page",component:function(){return r.a.createElement(Le,{sidebarVisible:e.state.sidebarVisible,handleSidebarClick:e.handleSidebarClick.bind(e)})}}),r.a.createElement(g.a,{path:"/login-form",component:function(){return r.a.createElement(Te,{sidebarVisible:e.state.sidebarVisible,handleSidebarClick:e.handleSidebarClick.bind(e)})}}),r.a.createElement(g.a,{path:"/register-form",component:function(){return r.a.createElement(Re,{sidebarVisible:e.state.sidebarVisible,handleSidebarClick:e.handleSidebarClick.bind(e)})}}))))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(f.a,null,r.a.createElement(Pe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[249,1,2]]]);
//# sourceMappingURL=main.bd411617.chunk.js.map